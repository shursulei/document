docker安装mysql

```
docker run --name mysql-5.5 -p 3306:3306 -e MYSQL_ROOT_PASSWORD=root -d mysql:5.5 --lower_case_table_names=1
#关闭大小写敏感
docker run --name mysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD=PASSWORD123! -d mysql --lower_case_table_names=1
docker exec -it mysql bash
mysql -u root -p
ALTER USER 'root'@'localhost' IDENTIFIED BY 'PASSWORD123!';

CREATE USER 'helijia'@'%' IDENTIFIED WITH mysql_native_password BY 'PASSWORD123!';
GRANT ALL PRIVILEGES ON *.* TO 'helijia'@'%';

5.7
docker run --name mysql5 -p 6006:3306 -e MYSQL_ROOT_PASSWORD=PASSWORD123! -d mysql:5.7
docker exec -it mysql5 bash
mysql -u root -p
ALTER USER 'root'@'localhost' IDENTIFIED BY 'PASSWORD123!';

CREATE USER 'helijia'@'%' IDENTIFIED WITH mysql_native_password BY 'PASSWORD123!';
GRANT ALL PRIVILEGES ON *.* TO 'helijia'@'%';
```



docker 安装nginx

```
docker pull nginx
sudo docker run --name nginx-test -p 8081:80 -d nginx
mkdir -p ~/nginx/www ~/nginx/logs ~/nginx/conf
sudo docker cp 680a0ca277fa:/etc/nginx/nginx.conf ~/nginx/conf
sudo docker run -d -p 8082:80 --name nginx-test-web -v ~/nginx/www:/usr/share/nginx/html -v ~/nginx/conf/nginx.conf:/etc/nginx/nginx.conf -v ~/nginx/logs:/var/log/nginx nginx

docker run --name nginx_pic  -p 8080:80 -v /Users/hanfeng/nginx/www/images:/images -v /Users/hanfeng/nginx/conf/nginx.conf:/etc/nginx/nginx.conf -d nginx

http://127.0.0.1:8080/WechatIMG2.jpeg
```

### 在nginx容器内部，配置用户和密码

```
#查看运行容器的ID
docker ps
 
#进入nginx容器
docker exec -it 容器ID /bin/bash
 
#容器内部操作
#更新软件源
apt-get update
 
#安装apache2-utils
apt-get install apache2-utils
 
#创建用户名
htpasswd -c /etc/nginx/passwd.db 用户名
dingding/dingding
 
#输入密码（自动弹出）
New password: 
Re-type new password: 
 
#查看用户和密码
cat /etc/nginx/passwd.db
 
#退出
exit
 
```

```
https://blog.csdn.net/w_meng_h/article/details/93393589
https://www.cnblogs.com/lyuzt/p/12575390.html
```

docker restart 容器ID

钉钉



```
https://oapi.dingtalk.com/robot/send?access_token=aad1272a403a800253f4266a2023dbc03a229d1afd3ba55329d83dd547f3575c
curl 'https://oapi.dingtalk.com/robot/send?access_token=aad1272a403a800253f4266a2023dbc03a229d1afd3ba55329d83dd547f3575c&timestamp=1608535600192&sign=RuqBIl4ZX%2BjDTB%2FiI5TwpW6865vBathyKMq77DKMq5A%3D' \
 -H 'Content-Type: application/json' \
 -d '{"msgtype": "text", 
  "text": {
    "content": "我就是我, 是不一样的烟火"
  },
  "sign": "RuqBIl4ZX%2BjDTB%2FiI5TwpW6865vBathyKMq77DKMq5A%3D"
  }'
  
  {
    "msgtype": "text", 
    "text": {
        "content": "我就是我, 是不一样的烟火@156xxxx8827111"
    }, 
    "at": {
        "atMobiles": [
            "156xxxx8827", 
            "189xxxx8325"
        ], 
        "isAtAll": true
    }
}
  
  {
    "msgtype": "link", 
    "link": {
        "text": "这个即将发布的新版本，创始人xx称它为红树林。而在此之前，每当面临重大升级，产品经理们都会取一个应景的代号，这一次，为什么是红树林", 
        "title": "时代的火车向前开", 
        "picUrl": "", 
        "messageUrl": "https://www.dingtalk.com/s?__biz=MzA4NjMwMTA2Ng==&mid=2650316842&idx=1&sn=60da3ea2b29f1dcc43a7c8e4a7c97a16&scene=2&srcid=09189AnRJEdIiWVaKltFzNTw&from=timeline&isappinstalled=0&key=&ascene=2&uin=&devicetype=android-23&version=26031933&nettype=WIFI"
    }
}
```



```
SELECT * FROM `app`.`z_email_job` 
where id in (993,996);


update app.z_email_job set job_status=1 where id=993;
update app.z_email_job set job_status=1 where id=996;


select * from z_wechat_job;

update app.`z_wechat_job` set sql= ”SELECT  coalesce(shop_city_name,'Total') AS 城市
        ,COUNT(DISTINCT shop_id) 上线门店数
        ,COUNT(DISTINCT CASE WHEN shop_business_status=2 THEN shop_id END) 开业门店数
        ,COUNT(DISTINCT CASE WHEN shop_business_status=1 THEN shop_id END) 待开业门店数
        ,COUNT(DISTINCT CASE WHEN shop_business_status=3 THEN shop_id END) 暂停营业门店数
        ,COUNT(DISTINCT CASE WHEN shop_business_status=4 THEN shop_id END) 关店门店数
        ,COUNT(
            DISTINCT CASE    WHEN substr(shop_open_tm,1,7)=TO_CHAR(DATEADD(GETDATE(), - 1, 'dd'),'yyyy-mm-dd') AND shop_business_status=2 THEN shop_id 
                     END
        ) 本月新开业门店数
        ,sum(artisan_num) as 开业且状态正常手艺人数
from helijia_ods.app_rpt_enterprise_shop_order_d where ds=TO_CHAR(DATEADD(GETDATE(), - 1, 'dd'),'yyyy-mm-dd') and  shop_city_name in ('北京市',
'上海市',
'杭州市',
'广州市',
'深圳市',
'成都市',
'南京市',
'武汉市',
'天津市',
'西安市',
'重庆市')
group by shop_city_name with cube order by 上线门店数;“ where id=30;
```



# minio

```
docker pull minio/minio
docker run -p 9000:9000 \
  --name minio1 \
  -v ~/data:/data \
  -e "MINIO_ACCESS_KEY=AKIAIOSFODNN7EXAMPLE" \
  -e "MINIO_SECRET_KEY=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY" \
  minio/minio server /data
```



https://www.cnblogs.com/CKExp/p/13835595.html

https://zalenet.cn/archives/%E4%BD%BF%E7%94%A8minio%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%E5%B9%B6%E8%BF%94%E5%9B%9Eurl



https://blog.csdn.net/masson32/article/details/105216237

https://docs.min.io/cn/minio-quickstart-guide.html



https://mp.weixin.qq.com/s/cOUZnk42q8q69e8lFBo0xQ





jinja2



pyodps

pip install pyodps







远程登录

```
远程登录跳板机
ssh -t -p7711 sysop@39.106.91.147
#跳板机从远处拷贝文件
scp -P 7711 sysop@10.1.4.20:/home/www/wwwroot/tomcat/tomcat8.5.30.0/webapps/ROOT/wechatfile/template/wx_excel_2018_32.xlsx /tmp

本地拷贝
scp -P 7711 sysop@39.106.91.147:/tmp/wx_excel_2018_32.xlsx ~/Downloads
```



docker安装airflow

```
sudo docker pull airflow
git clone https://github.com/puckel/docker-airflow.git
cd /Users/hanfeng/Documents/workspace/pycharmworkspace/docker-airflow
docker run -d -p 8082:8080 puckel/docker-airflow
airflow initdb  // 初始化数据库

 nohup airflow scheduler &

出现错误：

airflow.exceptions.AirflowException: Could not create Fernet object: Incorrect padding

解决办法：

python -c "from cryptography.fernet import Fernet;

print(Fernet.generate_key().decode())"

 

export AIRFLOW__CORE__FERNET_KEY=oNu9XwewQNyx9mAJT2vZvtm3qzPRZIWRqwk9hSVch4A=


```



反编译

```
jar -tf LogReceiver.jar |grep -i "log4j.properties"

豆瓣：http://pypi.douban.com/simple/

生成: pip freeze > requirements.txt
导入: pip install -r requirements.txt
```

tomcat 配置https协议
```
[root@centos apache-tomcat-6.0.37]# keytool -genkey -alias tomcat -keyalg RSA -keystore /home/www/wwwroot/tomcat8.5.30.0/conf/.keystore
输入keystore密码： helijia123456
再次输入新密码:
您的名字与姓氏是什么？
 [Unknown]： free4lab
您的组织单位名称是什么？
 [Unknown]： free4lab
您的组织名称是什么？
 [Unknown]： free4lab
您所在的城市或区域名称是什么？
 [Unknown]： beijing
您所在的州或省份名称是什么？
 [Unknown]： beijing
该单位的两字母国家代码是什么
 [Unknown]： CN
CN=free4lab, OU=free4lab, O=free4lab, L=beijing, ST=beijing, C=CN 正确吗？
 [否]： y
输入<tomcat>的主密码
  （如果和 keystore 密码相同，按回车）： 
[root@centos apache-tomcat-6.0.37]# cat conf/.keystore

[sysop@BI-f-10 conf]$ keytool -genkey -alias tomcat -keyalg RSA -keystore /home/www/wwwroot/tomcat8.5.30.0/conf/.keystore
输入密钥库口令:  
再次输入新口令: 
您的名字与姓氏是什么?
  [Unknown]:  helijia
您的组织单位名称是什么?
  [Unknown]:  helijia
您的组织名称是什么?
  [Unknown]:  helijia
您所在的城市或区域名称是什么?
  [Unknown]:  hangzhou
您所在的省/市/自治区名称是什么?
  [Unknown]:  hangzhou
该单位的双字母国家/地区代码是什么?
  [Unknown]:  CN      
CN=helijia, OU=helijia, O=helijia, L=hangzhou, ST=hangzhou, C=CN是否正确?
  [否]:  y

输入 <tomcat> 的密钥口令
  (如果和密钥库口令相同, 按回车):  
再次输入新口令: 

Warning:
JKS 密钥库使用专用格式。建议使用 "keytool -importkeystore -srckeystore /home/www/wwwroot/tomcat8.5.30.0/conf/.keystore -destkeystore /home/www/wwwroot/tomcat8.5.30.0/conf/.keystore -deststoretype pkcs12" 迁移到行业标准格式 PKCS12。

keystoreFile="/home/www/wwwroot/tomcat8.5.30.0/conf/.keystore" keystorePass="helijia123456"
```


